[进度](https://join.qq.com/progress.html)

## 4.2-一面
>录屏设备没调试好，没有我的声音。

面试强度较大，面试时间两小时五十五分钟。
面试官对卡住的点会循循善诱，好评。
>面试时间比较长也来自于此，面试官给面试者充分的思考时间。

先聊项目

+ 对DolphinDB架构的理解：从用户（业务端）的访问请求，到最后落到存储、分布式机构上。这个过程是怎么样的？
	1. 介绍DolphinDB产品形态
	2. 以Console和Heap开始讲（从网络入口开始）

	+ 提到了一些关键的类，它们在使用时的声明周期是怎样的？
	+ tcmalloc的用法是怎样的？是动态链接还是静态链接的？
		+ `tcmalloc`是怎么影响`new`关键字的？
		+ `new`和`malloc`有什么关系和区别？

	+ 在epoll处理相关的代码中，连接的数量是有上限的么？当出现上限时是怎么处理的？

+ 浏览器中输入URL后会发生什么？
	+ 域名污染问题如何解决？
	+ 计算机是怎么知道各级域名服务器的信息的？比如你知道`8.8.8.8`么？
	+ 讲一下HTTP
		+ 当HTTP报文过长，其下的TCP如何处理？
	+ 详细讲一下三握四挥
	+ 计算机网络中，数据流，位跳变，如何解决？都有哪些算法？
		+ CRC
	+ 你了解过大小端的概念么？

+ 一致性哈希：
	>没接触过这个话题相关的东西，DolphinDB也是中心式的，统一到控制节点查询元数据。经典八股愣是让我做成了开放场景题。
	
	随机键值存储，键认为是1~100K的字符串，多机，如何负载均衡？

	面试后查八股是“哈希环”，我面试中想到的算法是“哈希数”，即键哈希之后是一些长度相同的字节，选择某个长度，选择从某一端开始的该长度的区间作为分区的标志。该区间内容一样则在同一分区。
	扩容则是延长该区间选择长度，则对于多一位，该区间再被划分成两份。实现扩容（避免其他的节点的分区的移动）

	+ 在扩容或者缩容时：
		+ 如果做到对某个分区的读操作无损？
		+ 如果做到对某个分区的写操作无损？（对一个节点进行不断地键值写入，此时扩容，不能在用户层面感受到明显地卡顿和失败）

			+ 使用”增量式“（类似分布式复制中地复制状态机）修改地系统有哪些？

	+ 了解LSMT（lsm tree）么？
	+ 了解MySQL的主从同步么？

	+ Linux文件系统
		+ 一个文件实际上是存储几份？
		+ 对于一次文件写，会落盘（磁盘IO）几次？
		+ 了解inode么？
		+ 软连接和硬连接的区别

	+ DolphinDB是直接读写裸盘还是文件系统？

八股

+ 你对Linux的命令了解么？
+ 你平时开发的Linux环境是什么？
+ 你买过用过云服务器么？
+ 你使用虚拟机，虚拟机的软件是什么？用过VirtualBox么？使用的哪个发行版，哪个版本？其他Linux发行版了解么？
+ 你会翻墙么？
+ 使用过ChatGPT么？使用的版本是哪个？
+ 了解操作系统的内存分配么？
+ 了解操作系统的虚拟内存么？
+ 对“段”和“页”的概念了解么？
+ 说一说Linux中的内存分配算法和内存回收
+ 讲一下虚拟地址和物理地址
	+ 在new了一大块堆空间后，什么时候会有实际物理内存分配给它
+ 讲一下用户态和内核态
	+ 为什么xv6要实现用户态的线程
+ 在C++函数调用过程中，会发生什么事情？都有哪些操作？函数压栈具体是怎么回事？函数压栈是用什么表示的？除了传参之外，函数调用还有什么？
+ 你在ACM是复杂哪一方面，学到了什么？
	+ 线段树解决的是什么问题？
	+ 有手写过红黑数么？有写过其他平衡树么？
+ 有写过多线程的东西么？熟练度怎么样？线程安全的队列实现过么？

代码

+ 线程安全的LRU Cache，C++11，要求Cache的基本操作尽量快，注意拷贝尽量少。键和值的类型是`std::string`即可：[zweix123/code-examples/CacheImpl/LRU.h](https://github.com/zweix123/code-examples/blob/master/CacheImpl/LRU.h)

	+ 使用LRU的场景有哪些
	+ 怎么表示返回值比较好？
		+ 指针和引用会有什么问题？
			+ 指针悬停的表现是什么？怎么查？
			+ 对一个`std::string`的指针，如果对应的实例被delete，再通过指针使用，会出现什么情况？
			+ `std::unordered_map`的扩容名字叫什么？有哪些开销？对这里有什么影响？
		+ 最后选择了一个Golang味道十足的`std::pair<std::string, bool>`的方案
	+ `push_back`和`emplace_back`的有什么不同，你会实现后者么？怎么在指定内存上构造对象呢？

	+ `assert`：
		+ 不同的编译选项可能会消除对么？
		+ 是怎么终止进程的？
		+ 了解信号么？
		+ 信号和中断的关键和区别是什么？

+ 讲一下Raft的具体流程
+ 知道动态库和静态库的区别么？

学过编译原理对吧，写过Golang对吧。

+ 你在Github上讲笔记同步到外面，你觉得这个行为本身是怎么样的？出于怎样的目的做这件事的？

建议：了解分布式相关工业相关的东西，比如分布式的跨机器相关的。

+ 反问：
	+ 我们的产品有外部用户么？
		+ 有，时序部分有一定的外部用户，但不多，且优先级不高。
	+ 我们的产品内部是全部再用么？
		+ 微信和金融相关是在用自己的，我们主要是C2C的，性能不敏感的存储，比如QQ邮箱
	+ 现在数据库相关的开源项目很多，我们较于它们有哪些关系和不同？
		+ 接近kv rocks，是多模态数据库
	+ 使用哪些语言？
		+ 管控使用Golang，其他肯定是C++

## 4.7-二面
