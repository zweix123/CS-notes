# 概率

+ 期望的线性性质：$E(aX + bY + ...) = aE(X) + bE(Y) + ...$：指导我们对于一个大事件的期望，可以通过求得各个小事件的期望乘上前面的概率

+ 期望题目特点：由单个起点状态到若干终点状态的期望长度

  则**$f(终点) = 0$**，答案为$f(起点)$，而我们讨论中间态

  对于状态`i`，其接下来的状态有$S_1, S_2, ..., S_k$，设到各个状态的事件为$X_1, X_2, ..., X_k$、对应概率为$P_1, P_2, ..., P_k$、且”路径“长度为$W_1, W_2, ..., W_k$，则有：
  $$
  f(i) &= E( \ P1*(W_1 + X_1) + P2*(W_2 + X_2)) + ... + Pk*(W_k + X_k) \ ) \hfill \\
       &= P1*(W_1 + E(X_1)) + P2*(W_2 + E(X_2)) + ... + Pk*(W_k + E(X_k))\hfill \\
       &= P1*(W_1 + f(S_1)) + P2*(W_2 + f(S_2)) + ... + Pk*(W_k + f(S_k))\hfill \\
  $$
  即：$f(i) = \sum_{i = 1}^{k} \ P_i * (W_i + f(S_i))$

  + 即在拓扑序上的记忆化搜索——DP

  ```c++
  double f[];  //初始化为不可能的值
  double dp(type node) {
      if (f[node]已经处理过) return f[node];
      if (node是某个终点) return 设定值;
      f[node] = 0;  //开始计算
  	for (遍历所有出边) {
          递推公式（其中包含f(下一个点)）
      }
      return f[node];
  }
  //f(起点)即是
  ```
