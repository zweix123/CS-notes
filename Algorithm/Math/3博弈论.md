# 博弈论

+ 公平组合游戏ICG：两人参加轮流决策了解完整信息、结果只与局面有关同一局面只能到达一次，有限次决策结束无法移动输

| 术语                   | 解释               | 特点      |
| ---------------------- | ------------------ | --------- |
| `P(previous)-position` | 后手必胜、先手必败 | 无法移动  |
| `N(next)-position`     | 先手必胜，后手必败 | 可转移到P |

## 经典博弈

### Bask Game

+ 说明：`1`堆`n`个物品，两人轮流取`1~m`个
+ 证明：$n = k \times (m + 1) + r$
+ 结论：取走r后，在整除m + 1的局面中，先手无论取多少，后手都取对应和为m + 1个，可使局面不变

### Fibonacci Nim Game

+ 说明：`1`堆`n`个物品，两人轮流取，第一次可以取1~n-1个，之后每次取不能超上一次的2倍

### Wythoff Game

+ 说明：`2`堆$a_1, a_2$个物品，两人轮流从任意一堆取至少一个至多无限物品**或**从两堆取同样多的物品（至少取一个至多无限）

### Nim Game

+ 说明：`n`堆$a_i$个物品，两人轮流从某堆取不少于`1`个
+ 结论：对于一个Nim游戏的局面$(a_1, a_2, ..., a_n)$，它是**`P-position`**当且仅当$a_1 \oplus a_2 ... \oplus a_n = 0$ 。 

## SG函数

### 有向图游戏

+ 定义：有向无环图，唯一起点，2人控制1棋子交替移动，无法移动为输

  > 任何公平组合游戏都可以转换成有向图游戏

+ Mex运算（minimal excludant）：

  设$S$表示一个非负整数集合。定义$mex(S)$为求出不属于集合$S$的最小非负整数的运算，即：$mex(S) = min{x}, x属于自然数，且x不属于S$

+ SG(Sprague-Grundy)函数：

  + 在有向图游戏中，对于每个节点x，设从x出发共有k条有向边，分别到达节点y1, y2, …, yk，定义SG(x)为x的后继节点y1, y2, …, yk 的SG函数值构成的集合再执行mex(S)运算的结果，即：SG(x) = mex({SG(y1), SG(y2), …, SG(yk)})
  + 特别地，整个有向图游戏G的SG函数值被定义为有向图游戏起点s的SG函数值，即SG(G) = SG(s)。

  > 有向图游戏的和 —— 模板题 AcWing 893. 集合-Nim游戏
  > 设G1, G2, …, Gm 是m个有向图游戏。定义有向图游戏G，它的行动规则是任选某个有向图游戏Gi，并在Gi上行动一步。G被称为有向图游戏G1, G2, …, Gm的和。
  > 有向图游戏的和的SG函数值等于它包含的各个子游戏SG函数值的异或和，即：
  > SG(G) = SG(G1) ^ SG(G2) ^ … ^ SG(Gm)

  + 定理：
    + 有向图游戏的某个局面必胜，当且仅当该局面对应节点的SG函数值大于0。
    + 有向图游戏的某个局面必败，当且仅当该局面对应节点的SG函数值等于0。
